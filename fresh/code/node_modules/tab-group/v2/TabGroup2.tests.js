var docroot = require("docroot");
var TabGroup = require("./TabGroup2");
var View = require("view42/v1");

var routerTest = TabGroup({
	name: "routerTest",
	quickie: function(name){
		this.quickies = this.quickies || [];
		var quickie = this.append_panel(name, View(name + " contents."));
		this.quickies.push(quickie);
		return quickie;
	}
});

var rootRoutes = View(function(){

	var makeClickHandler = function(name){
		return function(){
			var panel = routerTest.quickie(name);
			panel.activate();
		};
	};
	for (var i = 1; i < 6; i++)
		this.append(View("test-route"+i).click(makeClickHandler("test-route"+i)));
});

routerTest.append_panel("/", rootRoutes).then(function(){
	routerTest.quickies.forEach(panel => panel.remove());
	routerTest.quickies = [];
});

docroot.addClass("spacey").router.views.append(routerTest);

// docroot.tabGroupTest.tree.activate();